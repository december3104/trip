<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	
	<select id="loginChkMember" parameterType="Member" resultType="Member">
		select * from member where member_id = #{member_id}
	</select>
	
	<insert id="insertMember" parameterType="Member">
		insert into member values (#{member_id}, #{member_name}, #{member_pwd}, #{member_email}, 
		#{member_gender}, #{member_phone}, to_date(#{member_birth}, 'YYYY/MM/DD'), #{member_profile_original}, 
		#{member_profile_rename}, default, default, default, default, null)
	</insert>
	
	<select id="selectOneMember" parameterType="string" resultType="Member">
		select * from member where member_id = #{value}
	</select>
	
	<update id="updateMember" parameterType="Member">
		update member set member_pwd = #{member_pwd}, member_phone = #{member_phone}
		<if test="member_profile_orginal != null">
		, member_profile_original = #{member_profile_original}, member_profile_rename = #{member_profile_rename}
		</if>
	</update>
	
	<update id ="updateGuideMember" parameterType="string">
		update member set guide_qualification = 'NONE' where member_id = #{value}
	</update>
	
	<delete id="deleteMember" parameterType="string">
		delete member where member_id = #{value}
	</delete>
	
	<select id="selectSearchMemberId" parameterType="string" resultType="_int">
		select count(member_id) from member where member_id = #{value}
	</select>
	
	<select id="selectSearchMemberEmail" parameterType="string" resultType="_int">
		select count(member_email) from member where member_email = #{value}
	</select>
	
	<select id="selectSearchMemberPhone" parameterType="string" resultType="_int">
		select count(member_phone) from member where member_phone = #{value}
	</select>
		
	<select id="selectListAllMember" resultType="Member">
		select * from member where guide_qualification='NONE' or guide_qualification = 'WAIT'
	</select>
	
	<select id="selectListAllGuide" resultType="GuideMember">
		select member_name, member_id, member_gender, member_email, guide_grade, guide_report_count 
		from member
		full outer join guide on member.member_id = guide.guide_id
		where guide_qualification = 'DONE'
	</select>
	
	<select id="selectListApplyGuide" resultType="Member">
		select * from member where guide_qualification='WAIT'
	</select>
	
	<select id="selectDetailViewMember"  parameterType="string" resultType="Member">
		select * from member where member_id = #{value}
	</select>
	
	

</mapper>
